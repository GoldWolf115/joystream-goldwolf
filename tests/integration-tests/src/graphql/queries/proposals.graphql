fragment ProposalStatusFields on ProposalStatus {
  __typename
  ... on ProposalStatusDeciding {
    proposalStatusUpdatedEvent {
      id
    }
  }
  ... on ProposalStatusGracing {
    proposalStatusUpdatedEvent {
      id
    }
  }
  ... on ProposalStatusDormant {
    proposalStatusUpdatedEvent {
      id
    }
  }
  ... on ProposalStatusVetoed {
    proposalDecisionMadeEvent {
      id
    }
  }
  ... on ProposalStatusExecuted {
    proposalExecutedEvent {
      id
    }
  }

  ... on ProposalStatusExecutionFailed {
    proposalExecutedEvent {
      id
    }
    errorMessage
  }
  ... on ProposalStatusSlashed {
    proposalDecisionMadeEvent {
      id
    }
  }

  ... on ProposalStatusRejected {
    proposalDecisionMadeEvent {
      id
    }
  }

  ... on ProposalStatusExpired {
    proposalDecisionMadeEvent {
      id
    }
  }

  ... on ProposalStatusCancelled {
    canelledInEvent {
      id
    }
  }

  ... on ProposalStatusCanceledByRuntime {
    proposalDecisionMadeEvent {
      id
    }
  }
}

fragment ProposalDetailsFields on ProposalDetails {
  __typename
  ... on SignalProposalDetails {
    text
  }
  ... on RuntimeUpgradeProposalDetails {
    wasmBytecode
  }
  ... on FundingRequestProposalDetails {
    destinationsList {
      destinations {
        amount
        account
      }
    }
  }
  ... on SetMaxValidatorCountProposalDetails {
    newMaxValidatorCount
  }

  ... on CreateWorkingGroupLeadOpeningProposalDetails {
    metadata {
      ...OpeningMetadataFields
    }
    stakeAmount
    unstakingPeriod
    rewardPerBlock
    group {
      id
    }
  }
  ... on FillWorkingGroupLeadOpeningProposalDetails {
    opening {
      id
    }
    application {
      id
    }
  }
  ... on UpdateWorkingGroupBudgetProposalDetails {
    amount
    group {
      id
    }
  }
  ... on DecreaseWorkingGroupLeadStakeProposalDetails {
    lead {
      id
    }
    amount
  }

  ... on SlashWorkingGroupLeadProposalDetails {
    lead {
      id
    }
    amount
  }
  ... on SetWorkingGroupLeadRewardProposalDetails {
    lead {
      id
    }
    newRewardPerBlock
  }

  ... on TerminateWorkingGroupLeadProposalDetails {
    lead {
      id
    }
    slashingAmount
  }

  ... on AmendConstitutionProposalDetails {
    text
  }

  ... on CancelWorkingGroupLeadOpeningProposalDetails {
    opening {
      id
    }
  }

  ... on SetMembershipPriceProposalDetails {
    newPrice
  }

  ... on SetCouncilBudgetIncrementProposalDetails {
    newAmount
  }

  ... on SetCouncilorRewardProposalDetails {
    newRewardPerBlock
  }

  ... on SetInitialInvitationBalanceProposalDetails {
    newInitialInvitationBalance
  }

  ... on SetInitialInvitationCountProposalDetails {
    newInitialInvitationsCount
  }

  ... on SetMembershipLeadInvitationQuotaProposalDetails {
    newLeadInvitationQuota
  }

  ... on SetReferralCutProposalDetails {
    newReferralCut
  }

  # TODO: Blog proposals

  ... on VetoProposalDetails {
    proposal {
      id
    }
  }
}

fragment ProposalFields on Proposal {
  id
  title
  description
  details {
    ...ProposalDetailsFields
  }
  stakingAccount
  creator {
    id
  }
  exactExecutionBlock
  councilApprovals
  proposalStatusUpdates {
    id
  }
  votes {
    id
  }
  status {
    ...ProposalStatusFields
  }
  statusSetAtBlock
  statusSetAtTime
}

query getProposalsByIds($ids: [ID!]) {
  proposals(where: { id_in: $ids }) {
    ...ProposalFields
  }
}
