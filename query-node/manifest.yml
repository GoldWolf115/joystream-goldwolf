version: '0.1'
description: Joystream query-node manifest file for olympia
repository: https://github.com/Joystream/joystream
hydraVersion: "2"
dataSource:
  kind: substrate
  chain: joystream
  indexerVersion: '0.1.6'
entities:
  - generated/graphql-server/dist/src/modules/**/*.model.js
typegen:
  metadata:
    source: ${TYPEGEN_WS_URI}
  events:
    - members.MembershipBought
    - members.MemberProfileUpdated
    - members.MemberAccountsUpdated
    - members.MemberVerificationStatusUpdated
    - members.InvitesTransferred
    - members.MemberInvited
    - members.StakingAccountConfirmed
    - members.StakingAccountRemoved
    - members.InitialInvitationCountUpdated
    - members.MembershipPriceUpdated
    - members.ReferralCutUpdated
    - members.InitialInvitationBalanceUpdated
  calls:
    - members.updateProfile
    - members.updateAccounts
  outDir: ./mappings/generated/types
  customTypes:
    lib: '@joystream/types/augment/all/types'
    typedefsLoc: '../types/augment/all/defs.json'
mappings:
  hydraCommonVersion: '0.0.3'
  # process only blocks with height >= 1M
  # blockInterval: '[1000000,]'
  # js module that exports the handler functions
  mappingsModule: mappings/lib/mappings
  # additinal libraries the processor loads
  # typically it is a module with event and extrinsic types generated by hydra-typegen
  imports:
    - mappings/lib/generated/types
  eventHandlers:
    - event: members.MembershipBought
      handler: members_MembershipBought(DatabaseManager, SubstrateEvent)
    - event: members.MemberProfileUpdated
      handler: members_MemberProfileUpdated(DatabaseManager, SubstrateEvent)
    - event: members.MemberAccountsUpdated
      handler: members_MemberAccountsUpdated(DatabaseManager, SubstrateEvent)
    - event: members.MemberVerificationStatusUpdated
      handler: members_MemberVerificationStatusUpdated(DatabaseManager, SubstrateEvent)
    - event: members.InvitesTransferred
      handler: members_InvitesTransferred(DatabaseManager, SubstrateEvent)
    - event: members.MemberInvited
      handler: members_MemberInvited(DatabaseManager, SubstrateEvent)
    - event: members.StakingAccountConfirmed
      handler: members_StakingAccountConfirmed(DatabaseManager, SubstrateEvent)
    - event: members.StakingAccountRemoved
      handler: members_StakingAccountRemoved(DatabaseManager, SubstrateEvent)
    - event: members.InitialInvitationCountUpdated
      handler: members_InitialInvitationCountUpdated(DatabaseManager, SubstrateEvent)
    - event: members.MembershipPriceUpdated
      handler: members_MembershipPriceUpdated(DatabaseManager, SubstrateEvent)
    - event: members.ReferralCutUpdated
      handler: members_ReferralCutUpdated(DatabaseManager, SubstrateEvent)
    - event: members.InitialInvitationBalanceUpdated
      handler: members_InitialInvitationBalanceUpdated(DatabaseManager, SubstrateEvent)
  extrinsicHandlers:
    # infer defaults here
    #- extrinsic: Balances.Transfer
    #- extrinsic: Sudo.batchCall
    #  handler: handleSudoCall(DatabaseManager,SubstrateEvent)
  preBlockHooks:
  postBlockHooks:
