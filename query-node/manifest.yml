version: '3.0'
description: Joystream query-node manifest file for storage v2
repository: https://github.com/Joystream/joystream
hydraVersion: "3"
dataSource:
  kind: substrate
  chain: joystream
entities:
  - generated/graphql-server/dist/src/modules/**/*.model.js
typegen:
  metadata:
    source: ws://localhost:9944
  events:
    - storage.StorageBucketCreated
    - storage.StorageBucketInvitationAccepted
    - storage.StorageBucketsUpdatedForBag
    - storage.DataObjectsUploaded
    - storage.StorageOperatorMetadataSet
    - storage.StorageBucketVoucherLimitsSet
    - storage.PendingDataObjectsAccepted
    - storage.StorageBucketInvitationCancelled
    - storage.StorageBucketOperatorInvited
    - storage.StorageBucketOperatorRemoved
    - storage.UploadingBlockStatusUpdated
    - storage.DataObjectPerMegabyteFeeUpdated
    - storage.StorageBucketsPerBagLimitUpdated
    - storage.StorageBucketsVoucherMaxLimitsUpdated
    - storage.DataObjectsMoved
    - storage.DataObjectsDeleted
    - storage.StorageBucketStatusUpdated
    - storage.UpdateBlacklist
    - storage.DynamicBagDeleted
    - storage.DynamicBagCreated
    - storage.VoucherChanged
    - storage.StorageBucketDeleted
    - storage.NumberOfStorageBucketsInDynamicBagCreationPolicyUpdated
    - storage.DistributionBucketFamilyCreated
    - storage.DistributionBucketFamilyDeleted
    - storage.DistributionBucketCreated
    - storage.DistributionBucketStatusUpdated
    - storage.DistributionBucketDeleted
    - storage.DistributionBucketsUpdatedForBag
    - storage.DistributionBucketsPerBagLimitUpdated
    - storage.DistributionBucketModeUpdated
    - storage.FamiliesInDynamicBagCreationPolicyUpdated
    - storage.DistributionBucketOperatorInvited
    - storage.DistributionBucketInvitationCancelled
    - storage.DistributionBucketInvitationAccepted
    - storage.DistributionBucketMetadataSet
  calls:
    # - members.updateProfile
  outDir: ./mappings/generated/types
  customTypes:
    lib: '@joystream/types/augment/all/types'
    typedefsLoc: '../types/augment/all/defs.json'
mappings:
  # js module that exports the handler functions
  mappingsModule: mappings/lib
  # additinal libraries the processor loads
  # typically it is a module with event and extrinsic types generated by hydra-typegen
  imports:
    - mappings/lib/generated/types
  eventHandlers:
    - event: storage.StorageBucketCreated
      handler: storage_StorageBucketCreated
    - event: storage.StorageBucketInvitationAccepted
      handler: storage_StorageBucketInvitationAccepted
    - event: storage.StorageBucketsUpdatedForBag
      handler: storage_StorageBucketsUpdatedForBag
    - event: storage.DataObjectsUploaded
      handler: storage_DataObjectsUploaded
    - event: storage.StorageOperatorMetadataSet
      handler: storage_StorageOperatorMetadataSet
    - event: storage.StorageBucketVoucherLimitsSet
      handler: storage_StorageBucketVoucherLimitsSet
    - event: storage.PendingDataObjectsAccepted
      handler: storage_PendingDataObjectsAccepted
    - event: storage.StorageBucketInvitationCancelled
      handler: storage_StorageBucketInvitationCancelled
    - event: storage.StorageBucketOperatorInvited
      handler: storage_StorageBucketOperatorInvited
    - event: storage.StorageBucketOperatorRemoved
      handler: storage_StorageBucketOperatorRemoved
    - event: storage.UploadingBlockStatusUpdated
      handler: storage_UploadingBlockStatusUpdated
    - event: storage.DataObjectPerMegabyteFeeUpdated
      handler: storage_DataObjectPerMegabyteFeeUpdated
    - event: storage.StorageBucketsPerBagLimitUpdated
      handler: storage_StorageBucketsPerBagLimitUpdated
    - event: storage.StorageBucketsVoucherMaxLimitsUpdated
      handler: storage_StorageBucketsVoucherMaxLimitsUpdated
    - event: storage.DataObjectsMoved
      handler: storage_DataObjectsMoved
    - event: storage.DataObjectsDeleted
      handler: storage_DataObjectsDeleted
    - event: storage.StorageBucketStatusUpdated
      handler: storage_StorageBucketStatusUpdated
    - event: storage.UpdateBlacklist
      handler: storage_UpdateBlacklist
    - event: storage.DynamicBagDeleted
      handler: storage_DynamicBagDeleted
    - event: storage.DynamicBagCreated
      handler: storage_DynamicBagCreated
    - event: storage.VoucherChanged
      handler: storage_VoucherChanged
    - event: storage.StorageBucketDeleted
      handler: storage_StorageBucketDeleted
    - event: storage.NumberOfStorageBucketsInDynamicBagCreationPolicyUpdated
      handler: storage_NumberOfStorageBucketsInDynamicBagCreationPolicyUpdated
    - event: storage.DistributionBucketFamilyCreated
      handler: storage_DistributionBucketFamilyCreated
    - event: storage.DistributionBucketFamilyDeleted
      handler: storage_DistributionBucketFamilyDeleted
    - event: storage.DistributionBucketCreated
      handler: storage_DistributionBucketCreated
    - event: storage.DistributionBucketStatusUpdated
      handler: storage_DistributionBucketStatusUpdated
    - event: storage.DistributionBucketDeleted
      handler: storage_DistributionBucketDeleted
    - event: storage.DistributionBucketsUpdatedForBag
      handler: storage_DistributionBucketsUpdatedForBag
    - event: storage.DistributionBucketsPerBagLimitUpdated
      handler: storage_DistributionBucketsPerBagLimitUpdated
    - event: storage.DistributionBucketModeUpdated
      handler: storage_DistributionBucketModeUpdated
    - event: storage.FamiliesInDynamicBagCreationPolicyUpdated
      handler: storage_FamiliesInDynamicBagCreationPolicyUpdated
    - event: storage.DistributionBucketOperatorInvited
      handler: storage_DistributionBucketOperatorInvited
    - event: storage.DistributionBucketInvitationCancelled
      handler: storage_DistributionBucketInvitationCancelled
    - event: storage.DistributionBucketInvitationAccepted
      handler: storage_DistributionBucketInvitationAccepted
    - event: storage.DistributionBucketMetadataSet
      handler: storage_DistributionBucketMetadataSet
  extrinsicHandlers:
    # infer defaults here
    #- extrinsic: Balances.Transfer
    #- extrinsic: Sudo.batchCall
    #  handler: handleSudoCall(DatabaseManager,SubstrateEvent)
  preBlockHooks:
    - handler: loadGenesisData
      filter:
        height: "[0,0]" # will be executed only at genesis
  postBlockHooks:
