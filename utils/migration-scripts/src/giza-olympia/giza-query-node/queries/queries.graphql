fragment VideoCategoryFields on VideoCategory {
  id
  name
}

fragment ChannelCategoryFields on ChannelCategory {
  id
  name
}

fragment StorageDataObjectFields on StorageDataObject {
  id
  ipfsHash
  isAccepted
  size
  storageBagId
}

fragment VideoFields on Video {
  id
  categoryId
  title
  description
  duration
  thumbnailPhoto {
    ...StorageDataObjectFields
  }
  language {
    iso
  }
  hasMarketing
  publishedBeforeJoystream
  isPublic
  isCensored
  isExplicit
  license {
    code
    attribution
    customText
  }
  media {
    ...StorageDataObjectFields
  }
  mediaMetadata {
    encoding {
      codecName
      container
      mimeMediaType
    }
    pixelWidth
    pixelHeight
    size
  }
  isFeatured
  channel {
    id
    ownerMember {
      id
      controllerAccount
    }
  }
}

fragment ChannelFields on Channel {
  id
  ownerMember {
    id
    controllerAccount
  }
  categoryId
  rewardAccount
  title
  description
  coverPhoto {
    ...StorageDataObjectFields
  }
  avatarPhoto {
    ...StorageDataObjectFields
  }
  isPublic
  isCensored
  language {
    iso
  }
  videos {
    id
  }
  collaborators {
    id
  }
}

fragment DistributionBucketFields on DistributionBucket {
  distributing
  bags {
    id
  }
  operators {
    status
    metadata {
      nodeEndpoint
    }
  }
}

query getChannelsByIds($ids: [ID!]) {
  channels(where: { id_in: $ids }, limit: 1000) {
    ...ChannelFields
  }
}

query getVideosByIds($ids: [ID!]) {
  videos(where: { id_in: $ids }, limit: 1000) {
    ...VideoFields
  }
}

query getVideoCategories {
  videoCategories {
    ...VideoCategoryFields
  }
}

query getChannelsCategories {
  channelCategories {
    ...ChannelCategoryFields
  }
}

query getDistributorsByBagIds($ids: [ID!]) {
  distributionBuckets(where: {
    bags_some: { id_in: $ids },
    distributing_eq: true,
  }) {
    ...DistributionBucketFields
  }
}
